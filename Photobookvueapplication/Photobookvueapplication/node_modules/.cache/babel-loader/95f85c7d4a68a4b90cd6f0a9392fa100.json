{"remainingRequest":"C:\\PhotoBookVueApplication\\Photobookvueapplication\\Photobookvueapplication\\node_modules\\babel-loader\\lib\\index.js!C:\\PhotoBookVueApplication\\Photobookvueapplication\\Photobookvueapplication\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\PhotoBookVueApplication\\Photobookvueapplication\\Photobookvueapplication\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\PhotoBookVueApplication\\Photobookvueapplication\\Photobookvueapplication\\src\\components\\hostlogin.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\PhotoBookVueApplication\\Photobookvueapplication\\Photobookvueapplication\\src\\components\\hostlogin.vue","mtime":1558991543862},{"path":"C:\\PhotoBookVueApplication\\Photobookvueapplication\\Photobookvueapplication\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\PhotoBookVueApplication\\Photobookvueapplication\\Photobookvueapplication\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\PhotoBookVueApplication\\Photobookvueapplication\\Photobookvueapplication\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\PhotoBookVueApplication\\Photobookvueapplication\\Photobookvueapplication\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Promise from \"C:\\\\PhotoBookVueApplication\\\\Photobookvueapplication\\\\Photobookvueapplication\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/promise\";\nimport _JSON$stringify from \"C:\\\\PhotoBookVueApplication\\\\Photobookvueapplication\\\\Photobookvueapplication\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/json/stringify\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\PhotoBookVueApplication\\\\Photobookvueapplication\\\\Photobookvueapplication\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  methods: {\n    autoLogin: function autoLogin() {\n      if (this.$cookie.get('LoggedInHost') == 'True') {\n        var Email = this.$cookie.get('LoggedInEmail');\n        this.$router.push({\n          name: 'HostHomePage',\n          params: {\n            HostEmail: Email\n          }\n        });\n      }\n    },\n    postHostLogin: function () {\n      var _postHostLogin = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var url, dataToBeSend, router, cookie, vuecomponent;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.logout();\n\n              case 2:\n                url = 'https://photobookwebapi1.azurewebsites.net/api/Account/Login';\n                dataToBeSend = {\n                  userName: this.HostEmail,\n                  passWord: this.HostPassword\n                };\n                router = this.$router;\n                cookie = this.$cookie;\n                vuecomponent = this;\n                fetch(url, {\n                  method: 'POST',\n                  credentials: 'include',\n                  headers: new Headers({\n                    'Content-Type': 'application/json',\n                    'Accept': 'application/json'\n                  }),\n                  mode: 'cors',\n                  body: _JSON$stringify(dataToBeSend)\n                }).then(function (response) {\n                  if (response.status == '200' || response.status == '204') {\n                    cookie.set('LoggedInHost', 'True');\n                    cookie.set('LoggedInEmail', vuecomponent.HostEmail);\n                    router.push({\n                      name: 'HostHomePage',\n                      params: {\n                        HostEmail: dataToBeSend.userName\n                      }\n                    });\n                  } else {\n                    alert(\"Email or password was wrong\");\n                  }\n                });\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function postHostLogin() {\n        return _postHostLogin.apply(this, arguments);\n      }\n\n      return postHostLogin;\n    }(),\n    logout: function logout() {\n      var _this = this;\n\n      return new _Promise(function (resolve, reject) {\n        var url = 'https://photobookwebapi1.azurewebsites.net/api/Account/Logout';\n        var cookie = _this.$cookie;\n        fetch(url, {\n          method: 'POST',\n          credentials: 'include',\n          headers: new Headers({\n            'Content-Type': 'application/json',\n            'Accept': 'application/json'\n          }),\n          mode: 'cors'\n        }).then(function (response) {\n          resolve();\n\n          if (response.status == '200' || response.status == '204') {\n            cookie.delete('LoggedInHost');\n            cookie.delete('LoggedInGuest');\n            cookie.delete('currenteventpin');\n            cookie.delete('currenteventname');\n            cookie.delete('currentguest');\n          } else {\n            alert(\"Failed to log out\");\n          }\n        });\n      });\n    }\n  },\n  data: function data() {\n    return {\n      HostEmail: null,\n      HostPassword: null,\n      HostId: null,\n      HostName: null\n    };\n  },\n  beforeMount: function beforeMount() {\n    this.autoLogin();\n  },\n  name: 'hostlogin',\n  props: {}\n};",{"version":3,"sources":["hostlogin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAaA,eAAA;AAGA,WAAA;AACA,eAAA,qBAAA;AACA,UAAA,KAAA,OAAA,CAAA,GAAA,CAAA,cAAA,KAAA,MAAA,EAAA;AACA,YAAA,QAAA,KAAA,OAAA,CAAA,GAAA,CAAA,eAAA,CAAA;AACA,aAAA,OAAA,CAAA,IAAA,CAAA;AAAA,gBAAA,cAAA;AAAA,kBAAA;AAAA,uBAAA;AAAA;AAAA,SAAA;AACA;AACA,KANA;AAOA;AAAA;AAAA;AAAA,8BAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,KAAA,MAAA,EADA;;AAAA;AAEA,mBAFA,GAEA,8DAFA;AAIA,4BAJA,GAIA;AACA,4BAAA,KAAA,SADA;AAEA,4BAAA,KAAA;AAFA,iBAJA;AAUA,sBAVA,GAUA,KAAA,OAVA;AAWA,sBAXA,GAWA,KAAA,OAXA;AAYA,4BAZA,GAYA,IAZA;AAeA,sBAAA,GAAA,EAAA;AACA,0BAAA,MADA;AAEA,+BAAA,SAFA;AAGA,2BAAA,IAAA,OAAA,CAAA;AACA,oCAAA,kBADA;AACA,8BAAA;AADA,mBAAA,CAHA;AAMA,wBAAA,MANA;AAOA,wBAAA,gBAAA,YAAA;AAPA,iBAAA,EASA,IATA,CASA,UAAA,QAAA,EAAA;AACA,sBAAA,SAAA,MAAA,IAAA,KAAA,IAAA,SAAA,MAAA,IAAA,KAAA,EAAA;AACA,2BAAA,GAAA,CAAA,cAAA,EAAA,MAAA;AACA,2BAAA,GAAA,CAAA,eAAA,EAAA,aAAA,SAAA;AACA,2BAAA,IAAA,CAAA;AAAA,4BAAA,cAAA;AAAA,8BAAA;AAAA,mCAAA,aAAA;AAAA;AAAA,qBAAA;AACA,mBAJA,MAKA;AACA,0BAAA,6BAAA;AACA;AAEA,iBAnBA;;AAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,OAPA;AA6CA,YAAA,kBAAA;AAAA;;AACA,aAAA,aAAA,UAAA,OAAA,EAAA,MAAA,EAAA;AAEA,YAAA,MAAA,+DAAA;AAEA,YAAA,SAAA,MAAA,OAAA;AAEA,cAAA,GAAA,EAAA;AACA,kBAAA,MADA;AAEA,uBAAA,SAFA;AAGA,mBAAA,IAAA,OAAA,CAAA;AACA,4BAAA,kBADA;AACA,sBAAA;AADA,WAAA,CAHA;AAMA,gBAAA;AANA,SAAA,EAOA,IAPA,CAOA,UAAA,QAAA,EAAA;AACA;;AACA,cAAA,SAAA,MAAA,IAAA,KAAA,IAAA,SAAA,MAAA,IAAA,KAAA,EAAA;AACA,mBAAA,MAAA,CAAA,cAAA;AACA,mBAAA,MAAA,CAAA,eAAA;AACA,mBAAA,MAAA,CAAA,iBAAA;AACA,mBAAA,MAAA,CAAA,kBAAA;AACA,mBAAA,MAAA,CAAA,cAAA;AAEA,WAPA,MAQA;AACA,kBAAA,mBAAA;AACA;AACA,SApBA;AAqBA,OA3BA,CAAA;AA4BA;AA1EA,GAHA;AAgFA,MAhFA,kBAgFA;AACA,WAAA;AACA,iBAAA,IADA;AAEA,oBAAA,IAFA;AAGA,cAAA,IAHA;AAIA,gBAAA;AAJA,KAAA;AAOA,GAxFA;AAyFA,aAzFA,yBAyFA;AACA,SAAA,SAAA;AACA,GA3FA;AA4FA,QAAA,WA5FA;AA6FA,SAAA;AA7FA,CAAA","sourcesContent":["<template>\r\n    <div id=\"Wrapper\">\r\n        <img src=\"images/photobooktitle.png\" width=\"90%\" height=\"90%\" />\r\n        <form>\r\n            <input class=\"textbox\" type=\"email\" v-model=\"HostEmail\"  placeholder=\"Email\" /> <br /> <br />\r\n            <input class=\"textbox\" type=\"password\" v-model=\"HostPassword\" placeholder=\"Password\" /> <br /> <br />\r\n            <input class=\"button\" type=\"button\" v-on:click=\"postHostLogin\" value=\"Click to login as host\" width=\"100px\" Height=\"50px\" /> <br />\r\n        </form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n    export default {\r\n\r\n\r\n        methods: {\r\n            autoLogin: function () {\r\n                if (this.$cookie.get('LoggedInHost') == 'True') {\r\n                    var Email = this.$cookie.get('LoggedInEmail'); \r\n                    this.$router.push({ name: 'HostHomePage', params: { HostEmail: Email } })\r\n                }\r\n            },\r\n            postHostLogin: async function () {\r\n                await this.logout();\r\n                var url = 'https://photobookwebapi1.azurewebsites.net/api/Account/Login';\r\n\r\n                var dataToBeSend = {\r\n                    userName: this.HostEmail,\r\n                    passWord: this.HostPassword\r\n                    \r\n                };\r\n\r\n                var router = this.$router;\r\n                var cookie = this.$cookie;\r\n                var vuecomponent = this;\r\n\r\n                \r\n                    fetch(url, {\r\n                        method: 'POST',\r\n                        credentials: 'include',\r\n                        headers: new Headers({\r\n                            'Content-Type': 'application/json', 'Accept': 'application/json'\r\n                        }),\r\n                        mode: 'cors',\r\n                        body: JSON.stringify(dataToBeSend)\r\n\r\n                    }).then(function (response) {\r\n                        if (response.status == '200' || response.status == '204') {\r\n                            cookie.set('LoggedInHost', 'True')\r\n                            cookie.set('LoggedInEmail', vuecomponent.HostEmail)\r\n                            router.push({ name: 'HostHomePage', params: { HostEmail: dataToBeSend.userName } })\r\n                        }\r\n                        else {\r\n                            alert(\"Email or password was wrong\")\r\n                        }\r\n\r\n                    })\r\n                \r\n                 \r\n            },\r\n            logout: function () {\r\n                return new Promise((resolve,reject) => {\r\n\r\n                    var url = 'https://photobookwebapi1.azurewebsites.net/api/Account/Logout';\r\n                    \r\n                    var cookie = this.$cookie;\r\n\r\n                     fetch(url, {\r\n                        method: 'POST',\r\n                        credentials: 'include',\r\n                        headers: new Headers({\r\n                            'Content-Type': 'application/json', 'Accept': 'application/json'\r\n                        }),\r\n                        mode: 'cors'\r\n                    }).then(function (response) {\r\n                        resolve()\r\n                        if (response.status == '200' || response.status == '204') {\r\n                            cookie.delete('LoggedInHost')\r\n                            cookie.delete('LoggedInGuest')\r\n                            cookie.delete('currenteventpin')\r\n                            cookie.delete('currenteventname')\r\n                            cookie.delete('currentguest')\r\n\r\n                        }\r\n                        else {\r\n                            alert(\"Failed to log out\")\r\n                        }\r\n                    })\r\n                })\r\n            }\r\n                \r\n        },\r\n        data () {\r\n            return {\r\n                HostEmail: null,\r\n                HostPassword: null,\r\n                HostId: null,\r\n                HostName: null\r\n                \r\n                }\r\n        },\r\n        beforeMount() {\r\n            this.autoLogin()\r\n        },\r\n        name: 'hostlogin',\r\n        props: {\r\n            \r\n        }\r\n\r\n\r\n\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n</style>"],"sourceRoot":"src/components"}]}