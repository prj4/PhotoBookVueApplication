{"remainingRequest":"C:\\PhotoBookVueApplication\\Photobookvueapplication\\Photobookvueapplication\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\PhotoBookVueApplication\\Photobookvueapplication\\Photobookvueapplication\\src\\components\\HostEventPage.vue?vue&type=style&index=0&id=4aa261fe&scoped=true&lang=css&","dependencies":[{"path":"C:\\PhotoBookVueApplication\\Photobookvueapplication\\Photobookvueapplication\\src\\components\\HostEventPage.vue","mtime":1557437206438},{"path":"C:\\PhotoBookVueApplication\\Photobookvueapplication\\Photobookvueapplication\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\PhotoBookVueApplication\\Photobookvueapplication\\Photobookvueapplication\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\PhotoBookVueApplication\\Photobookvueapplication\\Photobookvueapplication\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\PhotoBookVueApplication\\Photobookvueapplication\\Photobookvueapplication\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\PhotoBookVueApplication\\Photobookvueapplication\\Photobookvueapplication\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\na{\r\n    margin-left:5px;\r\n   \r\n}\r\n\r\n",{"version":3,"sources":["HostEventPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkMA;AACA;;AAEA","file":"HostEventPage.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div id=\"WrapperInternalPage\" class=\"Wrapper\">\r\n        \r\n            <div class=\"WrapperTopNav\">\r\n                <a>    {{thisEventName}} hosted by {{EventHostName}}</a> <br />\r\n                <div class=\"aligncenter\">\r\n                    <label class=\"inputlabel\" for=\"file\">\r\n                        <span v-if=\"UploadPhotos.length > 0\">{{UploadPhotos.length}} images selected</span>\r\n                        <span v-else>Select images</span>\r\n                    </label>\r\n\r\n                    <input name=\"file\" id=\"file\" class=\"inputfile\" accept=\"image/*\" type=\"file\" @change=\"onFileChange\" multiple>\r\n                    <button class=\"smallbutton\" @click=\"onUpload\">Upload</button>\r\n                    <button class=\"smallbutton\" @click=\"deleteEvent\">Delete Event</button>\r\n                    <!--<input class=\"smallbutton\" type=\"button\" v-on:click=\"updatepage\" value=\"Update\" />--> <br /> <br />\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <div class=\"ContentBox\">\r\n\r\n                <div v-if=\"EventPhoto != null\" v-for=\"(EventPhoto,index) in EventPhotos\" v-bind:key=\"EventPhoto\" class=\"imgdiv\">\r\n                    <router-link :to=\"{name: 'HostBigPhotoPage', params: {PictureIDindex: index}}\">\r\n                        <img  class=\"previewImg\" :src=\"EventPhoto\" /><br />\r\n                    </router-link>\r\n                </div>\r\n\r\n            </div>\r\n        \r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n\r\n        methods: {\r\n            onFileChange: function (event) {\r\n                this.UploadPhotos.length = 0;\r\n                for (var i = 0; i < event.target.files.length; i++) {\r\n                    this.$set(this.UploadPhotos, i, event.target.files[i]);\r\n                }\r\n            },\r\n            onUpload: function () {\r\n                var url = 'https://photobookwebapi1.azurewebsites.net/api/Picture'\r\n\r\n                var vuecomponent = this;\r\n\r\n                for (let i = 0; i < this.UploadPhotos.length; i++) {\r\n                    let reader = new FileReader();\r\n                    reader.readAsDataURL(this.UploadPhotos[i]);\r\n                    reader.onload = function () {\r\n                        let base64Img = reader.result.replace(/data:image\\/png;base64,|data:image\\/jpeg;base64,|data:image\\/gif;base64,/gi, '');\r\n                        \r\n                        //data: image / gif; base64,\r\n                        let dataToBeSend = {\r\n                            pictureString: base64Img,\r\n                            eventPin: vuecomponent.EventPin\r\n                        };\r\n\r\n                        fetch(url, {\r\n                            method: 'POST',\r\n                            credentials: 'include',\r\n                            headers: new Headers({\r\n                                'Content-Type': 'application/json', 'Accept': 'application/json'\r\n                            }),\r\n                            mode: 'cors',\r\n                            body: JSON.stringify(dataToBeSend)\r\n                        })\r\n                            .then(function (response) {\r\n                                if (response.status != '200') {\r\n                                    alert(\"Images failed to upload\")\r\n                                }\r\n                                vuecomponent.getEventPhotos();\r\n                            })\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                while (this.UploadPhotos.length != 0) {\r\n                    this.UploadPhotos.pop();\r\n                }\r\n\r\n                \r\n\r\n            },\r\n            getEventPhotos: function () {\r\n                var picturelisturl = 'https://photobookwebapi1.azurewebsites.net/api/Picture/Ids/' + this.EventPin;\r\n                var vuecomponent = this;\r\n\r\n                fetch(picturelisturl, {\r\n                    credentials: 'include',\r\n                    headers: new Headers({\r\n                        'Content-Type': 'application/json',\r\n                        'Accept': 'application/json',\r\n                        'Accept-Encoding': 'gzip, deflate, br',\r\n                        'Accept-Language': 'da, en-US; q=0.9, en; q=0.8, de; q=0.7, nb; q=0.6'\r\n\r\n                    }),\r\n                    mode: 'cors'\r\n                })\r\n                    .then(function (response) {\r\n                        if (response.status == '200') {\r\n                            response.json()\r\n                                .then(data => ({ body: data }))\r\n                                .then(function (data) {\r\n                                    for (let i = 0; i < data.body.pictureList.length; i++) {\r\n                                        vuecomponent.$set(vuecomponent.EventPhotoIDs, i, data.body.pictureList[i]);\r\n                                        \r\n                                    }\r\n                                    \r\n                                })\r\n                                .then(function () {\r\n                                    vuecomponent.$cookie.set('currenteventphotoids', JSON.stringify(vuecomponent.EventPhotoIDs))\r\n                                    vuecomponent.updatepage();\r\n                                })\r\n                        }\r\n                    })\r\n            },\r\n\r\n            updatepage: async function () {\r\n                var vuecomponent = this;\r\n                \r\n                for (let e = 0; e < vuecomponent.EventPhotoIDs.length; e++) {\r\n\r\n                    let specificpictureurl = 'https://photobookwebapi1.azurewebsites.net/api/Picture/Preview/' + vuecomponent.EventPin + '/' + vuecomponent.EventPhotoIDs[e];\r\n\r\n\r\n                    await fetch(specificpictureurl, {\r\n                        credentials: 'include',\r\n                        mode: 'cors'\r\n                    })\r\n                        .then(function (response) {\r\n                            if (response.status == '200') {\r\n                                response.blob()\r\n                                    .then(image => {\r\n                                        // Then create a local URL for that image and print it \r\n                                        vuecomponent.$set(vuecomponent.EventPhotos, e, URL.createObjectURL(image));\r\n                                        \r\n\r\n                                    })\r\n                            }\r\n                            else {\r\n                                vuecomponent.$set(vuecomponent.EventPhotos, e, null);\r\n                            }\r\n\r\n                        })\r\n                }\r\n            },\r\n            \r\n            \r\n        \r\n        },\r\n        data() {\r\n            return {\r\n                \r\n                EventPhotoIDs: [/*...*/],\r\n                EventPhotos: [/*...*/],\r\n                UploadPhotos: [/*...*/],\r\n                EventPin: null,\r\n                EventHostName: this.$cookie.get('LoggedInHostName'),\r\n                HostEmail: this.$cookie.get('LoggedInEmail'),\r\n                thisEventName: null\r\n                \r\n            }\r\n        },\r\n        beforeMount() {\r\n            \r\n\r\n            if (this.$cookie.get('currenteventname') == null) {\r\n                this.$cookie.set('currenteventname', this.$route.params.EventName)\r\n                this.$cookie.set('currenteventpin', this.$route.params.Pin)\r\n                \r\n            }\r\n            else if (this.$route.params.EventName != null && this.$cookie.get('currenteventname') != this.$route.params.EventName) {\r\n                this.$cookie.set('currenteventname', this.$route.params.EventName);\r\n                this.$cookie.set('currenteventpin', this.$route.params.Pin);\r\n            }\r\n\r\n            this.EventPin = this.$cookie.get('currenteventpin');\r\n            this.thisEventName = this.$cookie.get('currenteventname');\r\n\r\n            this.getEventPhotos();\r\n        },     \r\n        \r\n        \r\n      \r\n    }\r\n\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\na{\r\n    margin-left:5px;\r\n   \r\n}\r\n\r\n</style>"]}]}